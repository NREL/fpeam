<h1 id="introduction">Introduction</h1>
<p>The Feedstock Production Emissions to Air Model (FPEAM) calculates spatially explicit inventories of criteria air pollutants and precursors generated from agricultural and transportation activities associated with the production and supply of biomass feedstocks for renewable energy generation. FPEAM was originally developed to calculate air pollutants as part of the 2016 update to the Billion Ton Study (BTS). For this version of FPEAM, the code base has been substantially refactored and streamlined to provide increased flexibility around biomass production scenario definitions, including what activities and pollutants are included in the calculations and at what spatial scale. This document describes the FPEAM code base and default input files bundled with the beta model release.</p>
<p>A full list of the default pollutants calculated by FPEAM is given in the first table below. FPEAM calculations are organized into independent modules listed in the second table below along with the pollutants and pollutant-generating activities and processes included by default in each module. The EmissionFactors module is unique in that it can be used to calculate any pollutant from any activity, if sufficient input data is provided. In particular, users have the option of using the EmissionFactors module to replace the MOVES and/or NONROAD modules with emissions factors for agricultural equipment use and on-road biomass transportation. The EmissionFactors module can also be used to calculate pollutants from additional activities, such as non-nitrogen fertilizer application. At this stage of development calculating additional pollutants from either the NONROAD or MOVES modules is not allowed for in the model but this functionality can be added in the future if there is demand.</p>
<p>TABLE: Default list of pollutants calculated by FPEAM.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Pollutant</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">CO</td>
<td style="text-align: left;">Criteria air pollutant</td>
</tr>
<tr class="even">
<td style="text-align: center;">NH<sub>3</sub></td>
<td style="text-align: left;">Criteria air pollutant precursor</td>
</tr>
<tr class="odd">
<td style="text-align: center;">NO<sub>x</sub></td>
<td style="text-align: left;">Criteria air pollutant</td>
</tr>
<tr class="even">
<td style="text-align: center;">SO<sub>2</sub></td>
<td style="text-align: left;">Criteria air pollutant</td>
</tr>
<tr class="odd">
<td style="text-align: center;">VOC</td>
<td style="text-align: left;">Criteria air pollutant precursor</td>
</tr>
<tr class="even">
<td style="text-align: center;">PM<sub>2.5</sub></td>
<td style="text-align: left;">Criteria air pollutant</td>
</tr>
<tr class="odd">
<td style="text-align: center;">PM<sub>10</sub></td>
<td style="text-align: left;">Criteria air pollutant</td>
</tr>
</tbody>
</table>
<p>TABLE: Available FPEAM modules.</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 45%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Module</th>
<th style="text-align: center;">Default pollutants</th>
<th style="text-align: left;">Default activities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MOVES</td>
<td style="text-align: center;">All</td>
<td style="text-align: left;">Off-farm, on-road transportation of biomass to biorefineries</td>
</tr>
<tr class="even">
<td style="text-align: left;">NONROAD</td>
<td style="text-align: center;">All</td>
<td style="text-align: left;">On-farm use of agricultural equipment</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EmissionFactors</td>
<td style="text-align: center;">VOC, NH<sub>3</sub>, NO<sub>x</sub></td>
<td style="text-align: left;">Nitrogen fertilizer application; pesticide and herbicide application; other activities as data is available</td>
</tr>
<tr class="even">
<td style="text-align: left;">FugitiveDust</td>
<td style="text-align: center;">PM<sub>2.5</sub>, PM<sub>10</sub></td>
<td style="text-align: left;">On-farm use of agricultural equipment</td>
</tr>
</tbody>
</table>
<h2 id="organization-of-this-readme">Organization of this README</h2>
<p>A high-level overview of how to use FPEAM via the graphical user interface (GUI) packaged with the FPEAM code base is given in the FPEAM Workflow section.</p>
<p>FPEAM requires several other pieces of software to run a complete default scenario. Installation instructions for these dependencies and FPEAM itself are given in the Installing FPEAM and Dependencies section.</p>
<p>The Graphical User Interface section is organized around the GUI. Each sub-section gives details on each tab, including what user inputs are available, descriptions of each user option, input parameter, and dataset, and data sources for default parameter values and datasets.</p>
<p>Finally, details on the calculations performed by FPEAM and all simplifying and other assumptions are given in the Module Calculations and Assumptions section.</p>
<h1 id="fpeam-workflow">FPEAM Workflow</h1>
<p>FPEAM scenarios can be defined and run either through the graphical user interface or via the command line. The available functionality is the same regardless of how FPEAM is run.</p>
<h2 id="graphical-user-interface">Graphical user interface</h2>
<p>The FPEAM GUI was developed to be relatively self-explanatory with an easy to follow workflow. Upon opening the GUI, users will need to specify a scenario name (it is recommended to use unique scenario names for every FPEAM run), a project path where output files are saved, and which modules to run.</p>
<p>Inputs for each module are entered on the module’s tab. All tabs are pre-populated with default values such that users should need to enter custom values for relatively few inputs. Users may work through the tabs in any order before returning to the Home tab and clicking the Run button to generate results. The Reset button, also on the Home tab, will return all inputs to their default values.</p>
<p>While running FPEAM, a log is displayed on the Results tab with status messages that can be used to confirm FPEAM is running correctly or to debug a scenario. After the run completes, several basic visualizations are displayed on the same tab. These visualizations are intended to confirm that FPEAM ran correctly and returned results from all modules that were run. For more advanced visualizations, users should use the output CSV files saved in the project path directory.</p>
<h2 id="command-line-interface">Command line interface</h2>
<p>If FPEAM is run via command line, users must first generate config (.ini file extension) files for each module being run and one, the run config, for the scenario itself. These files contain the same inputs found in the GUI; users may use the template config files (.spec file extension) located in the <code>configs</code> folder in the repository as examples.</p>
<p>After defining the necessary config files, the following syntax is used to run an fpeam scenario:</p>
<p><code>fpeam --[module name]_config [module config file name].ini [run config file name]</code></p>
<p>where there is one <code>--[module_name]_config [module config file name].ini</code> combination for each module being run and the square-bracketed phrases should be replaced with module names and config file names.</p>
<p>Users can also enter <code>fpeam --help</code> to see additional command line syntax.</p>
<h1 id="installing-fpeam-and-dependencies">Installing FPEAM and Dependencies</h1>
<h2 id="python">Python</h2>
<p>FPEAM is written in Python 3 and requires Python 3.5 or above to be installed. First-time users of Python are recommended to install Python via Anaconda, which streamlines installing packages and managing environments. Instructions for installing Anaconda on Windows and macOS are located at <a href="https://docs.anaconda.com/anaconda/install/">anaconda.com</a>. A user guide for Anaconda is also available at <a href="https://docs.anaconda.com/anaconda/user-guide/">docs.anaconda.com</a>.</p>
<h2 id="required-python-packages">Required Python Packages</h2>
<ul>
<li>configobj</li>
<li>pandas</li>
<li>networkx</li>
<li>pymysql</li>
<li>lxml</li>
<li>numpy</li>
<li>matplotlib</li>
<li>qtpy</li>
</ul>
<p>The most up-to-date version available of each package should be installed. Using <code>conda install</code> for any new packages is strongly recommended, if Python was installed with Anaconda.</p>
<h2 id="moves-and-nonroad">MOVES and NONROAD</h2>
<p>FPEAM calls the U.S. Environmental Protection Agency’s (EPA) MOtor Vehicle Emission Simulator (MOVES) model to calculate pollutants generated during on-road feedstock transportation. NONROAD, a similar model for off-road vehicles including agricultural and forestry equipment, is packaged with MOVES. The latest version of MOVES can be downloaded from the <a href="https://www.epa.gov/moves/latest-version-motor-vehicle-emission-simulator-moves">EPA website</a> and installed using the built-in installation helper.</p>
<p><strong>MOVES should not be installed to the default directory recommended by the installer.</strong> Instead, create a directory called MOVES2014b or a similar, brief name directly under the C: drive and install MOVES to that location. It is necessary to keep filepaths associated with NONROAD (packaged with MOVES) under 30 characters, or else NONROAD will not process the complete filepath. Installing MOVES to this C:2014b directory will make running NONROAD through FPEAM possible.</p>
<p>MOVES itself has several dependencies including MySQL, installation instructions for which will be provided during the MOVES installation process.</p>
<h3 id="mysql-setup">MySQL Setup</h3>
<p>When installing MySQL for the first time, users will need to create a username and password for accessing the local database. FPEAM will use this username and password to read from the MOVES default database and write results from MOVES; users should make note of the username and password for later use, or set them to <code>root</code> / <code>root</code> to use the default FPEAM values.</p>
<p>MySQL may also require the <a href="https://www.microsoft.com/en-us/download/details.aspx?id=52685">Microsoft Visual C++ 2015 Redistributable</a> which can be downloaded and installed at the link.</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>While not required to run FPEAM, it is recommended that users planning on implementing their own modules or otherwise editing the FPEAM code base install an integrated development environment (IDE) for Python such as <a href="https://www.jetbrains.com/pycharm/">PyCharm</a>. An IDE is not required for users who do not intend to make changes to the codebase.</p>
<h2 id="fpeam">FPEAM</h2>
<p>After all dependencies are installed, download the FPEAM repository from GitHub. Open either a Windows Command Prompt or an Anaconda Prompt and navigate to the outer FPEAM directory <code>fpeam</code> using cd. Then enter:</p>
<p><code>pip install -e .</code></p>
<p><em>Please note</em> that FPEAM cannot be installed using <code>conda</code>, only <code>pip</code>. The above command will install FPEAM, the default datasets, and the GUI on your computer as a Python module. From this point you may run FPEAM using the GUI or via the command line.</p>
<h1 id="graphical-user-interface-1">Graphical User Interface</h1>
<p>Each sub-section goes over one of the GUI tabs.</p>
<h2 id="home">Home</h2>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/home-top.PNG" alt="Screenshot of the Home tab on the GUI, with all sections expanded and all inputs as they appear when the GUI is first opened." /><figcaption>Screenshot of the Home tab on the GUI, with all sections expanded and all inputs as they appear when the GUI is first opened.</figcaption>
</figure>
<p>The Home tab contains the only required inputs for running a scenario, which are the scenario name and the project path. All other inputs are pre-populated with default values, such that FPEAM can quickly be run for a basic, nationwide feedstock production scenario.</p>
<p>The <strong>Scenario Name</strong> is used in several places to identify inputs, outputs and final results for this scenario. Using unique scenario names for every FPEAM run is strongly recommended, even if FPEAM is run several times for the same scenario or set of input data.</p>
<p>The <strong>Project Path</strong> is where FPEAM will save the final results in the form of CSV files. It is not necessary to create a new directory for every scenario or FPEAM run, as the scenario names are used in the results filenames to distinguish the results of various runs.</p>
<p>Modules to include or exclude in a scenario are indicated with checkboxes. By default, all modules are included in a scenario thus all boxes are checked. For any modules that are deselected - indicating that the module will not be run for the current FPEAM scenario - the corresponding tab will be greyed out and inaccessible to indicate that inputs for that module are not necessary.</p>
<p>The <strong>Reset</strong> button will return all inputs, on all tabs, to their default values, while the <strong>Run</strong> button will execute FPEAM. If a scenario name and project path have not been defined, or if there are key errors in the inputs (which are indicated by messages within the GUI), then the Run button cannot be clicked.</p>
<p>All other inputs on the Home tab are parameter values and input datasets that are used in multiple modules. Any datasets, parameters and other inputs used by only a single module are located on that module’s specific tab.</p>
<h3 id="custom-data-filepaths">Custom Data Filepaths</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/home-customdatafilepaths.PNG" alt="Screenshot of the Custom Data Filepaths section on the Home tab" /><figcaption>Screenshot of the Custom Data Filepaths section on the Home tab</figcaption>
</figure>
<p><strong>Equipment use</strong>. The equipment dataset defines the agricultural activities involved in feedstock production. Columns and data types in this dataset are defined in the table below. The equipment dataset defines the equipment used for each agricultural activity (in the default equipment dataset, activities consist of establishment, maintenance, harvest and loading, but additional or alternate activities may be specified as needed) as well as the resources consumed, such as fuel, time, fertilizer, and other agricultural chemicals. Resource rate (amount) units in the equipment dataset must correspond with the units in the feedstock production dataset discussed below, or an error will be given when the data is read into FPEAM. For each activity that involves agricultural equipment, the equipment name must be provided. These are user-defined names that are matched to NONROAD equipment types with the <code>nonroad_equipment</code> file discussed further in the NONROAD module section.</p>
<p>TABLE: List of columns and data types in equipment dataset.</p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 29%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column name</th>
<th style="text-align: center;">Data type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">feedstock</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Feedstock being grown</td>
</tr>
<tr class="even">
<td style="text-align: left;">tillage_type</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Tillage practice</td>
</tr>
<tr class="odd">
<td style="text-align: left;">equipment_group</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Region identifier</td>
</tr>
<tr class="even">
<td style="text-align: left;">rotation_year</td>
<td style="text-align: center;">integer</td>
<td style="text-align: left;">Year of crop rotation</td>
</tr>
<tr class="odd">
<td style="text-align: left;">activity</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Category of on-farm activity for which the equipment is used</td>
</tr>
<tr class="even">
<td style="text-align: left;">equipment_name</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Description of equipment used, if any</td>
</tr>
<tr class="odd">
<td style="text-align: left;">equipment_horsepower</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Horsepower (if applicable to equipment)</td>
</tr>
<tr class="even">
<td style="text-align: left;">resource</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Resource used (each activity may have multiple resources associated with it)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rate</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Quantity of resource used</td>
</tr>
<tr class="even">
<td style="text-align: left;">unit_numerator</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Numerator of resource rate unit</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unit_denominator</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Denominator of resource rate unit</td>
</tr>
</tbody>
</table>
<p>Equipment data must be specified at a regional level of resolution, but the exact bounds of each region can be user-defined and at any scale. In the default equipment data, some region identifiers are numbered, albeit with the numbers stored as characters rather than integers, and some are named. Numbered regions correspond to U.S. Farm Resource Regions (FRRs), while named regions correspond to forestry regions. Regions in the equipment dataset must correspond with the regions defined in the feedstock production dataset discussed below to allow feedstock production data to be merged with the equipment data. Feedstocks and tillage types in the equipment dataset must also match those in the feedstock production dataset. Any equipment data without matching feedstock production data or vice versa will be excluded from FPEAM calculations.</p>
<p>The <code>rotation_year</code> column in the equipment dataset refers to the year in a multi-year crop rotation such as a switchgrass cropping system. <code>rotation_year</code> should not contain calendar years but rather integers greater than or equal to 1. The calendar year in which the rotation begins is specified for each scenario within the FPEAM GUI. This <code>year</code> parameter specifies the calendar year in which biomass is first grown, harvested and transported in a scenario.</p>
<p>The equipment data provided with the FPEAM release was obtained from the Policy Analysis System (POLYSYS) model, “a national, interregional, agricultural model” <a href="https://www.sciencedirect.com/science/article/pii/S0961953499000951">(Ugarte and Ray, 2000)</a>. From the <a href="https://ag.tennessee.edu/arec/Pages/beag.aspx">University of Tennessee’s Bio-Based Energy Analysis Group</a>, POLYSYS</p>
<blockquote>
<p>is a dynamic stochastic (in yields) model of the US agricultural sector, capable of estimating the competitive allocation of agricultural land and feedstock prices associated with changes in yield and management practices. Input requirements include a baseline solution typically from USDA, and policy or resource changes desired for a particular scenario. Output includes economic variables such as County-level feedstock supply, national feedstock demands and prices, National livestock supply and demand, farm income, and land use including forest harvest, afforestation, and pasture conversion. In addition, through the environmental module, estimates of changes in carbon emission and sequestration, soil erosion and sediment, fertilizer use, and chemical use are provided.</p>
</blockquote>
<p>Equipment data for whole trees and forest residues was obtained from the Forest Sustainable and Economic Analysis Model (ForSEAM), “a national forest optimization model.” Also from the <a href="https://ag.tennessee.edu/arec/Pages/beag.aspx">University of Tennessee’s Bio-Based Energy Analysis Group</a>:</p>
<blockquote>
<p>the Forest Sustainable and Economic Analysis Model (ForSEAM) was originally constructed to estimate forest land production over time and its ability to produce not only traditional forest products, but also products to meet biomass feedstock demands through a cost minimization algorithm (He et al., 2014). The model has three components. The supply component includes general forest production activities for 305 production regions based on USDA’s agricultural supply districts. Each region has a set of production activities defined by the USFS. The Forest Product Demand Component is based on six USFS Scenarios with estimates developed by the US Forest Products Model. The sustainability component ensures that harvest in each region does not exceed annual growth, forest tracts are located within one-half mile of existing roads, and that current year forest attributes reflect previous years’ harvests and fuel removals. The model incorporates dynamic tracking of forest growth.</p>
</blockquote>
<p>The default equipment dataset did not originally include loading equipment. Rates for this equipment were incorporated into the dataset separately and are shown in the table below.</p>
<p>TABLE: Loading equipment information source from the <a href="https://www.energy.gov/eere/bioenergy/downloads/2016-billion-ton-report-volume-2-environmental-sustainability-effects">2016 Update to the Billion Ton Study, Volume 2</a> (BTS 2016).</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">feedstock</th>
<th style="text-align: center;">equipment type</th>
<th style="text-align: center;">equipment horsepower</th>
<th style="text-align: center;">resource</th>
<th style="text-align: left;">rate</th>
<th style="text-align: left;">unit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">corn stover</td>
<td style="text-align: center;">tractor</td>
<td style="text-align: center;">143</td>
<td style="text-align: center;">time</td>
<td style="text-align: left;">0.017361</td>
<td style="text-align: left;">hour/dry short ton</td>
</tr>
<tr class="even">
<td style="text-align: left;">wheat straw</td>
<td style="text-align: center;">tractor</td>
<td style="text-align: center;">143</td>
<td style="text-align: center;">time</td>
<td style="text-align: left;">0.017361</td>
<td style="text-align: left;">hour/dry short ton</td>
</tr>
<tr class="odd">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: center;">tractor</td>
<td style="text-align: center;">143</td>
<td style="text-align: center;">time</td>
<td style="text-align: left;">0.017361</td>
<td style="text-align: left;">hour/dry short ton</td>
</tr>
<tr class="even">
<td style="text-align: left;">sorghum stubble</td>
<td style="text-align: center;">tractor</td>
<td style="text-align: center;">450</td>
<td style="text-align: center;">time</td>
<td style="text-align: left;">0.050226017</td>
<td style="text-align: left;">hour/dry short ton</td>
</tr>
<tr class="odd">
<td style="text-align: left;">corn grain</td>
<td style="text-align: center;">tractor</td>
<td style="text-align: center;">143</td>
<td style="text-align: center;">time</td>
<td style="text-align: left;">0.017361</td>
<td style="text-align: left;">hour/dry short ton</td>
</tr>
<tr class="even">
<td style="text-align: left;">miscanthus</td>
<td style="text-align: center;">tractor</td>
<td style="text-align: center;">143</td>
<td style="text-align: center;">time</td>
<td style="text-align: left;">0.017361</td>
<td style="text-align: left;">hour/dry short ton</td>
</tr>
</tbody>
</table>
<p><strong>Feedstock production</strong>. The feedstock production dataset defines what feedstocks were produced where, in what amounts, and by which agricultural practices. Columns and data within this dataset are described in the table below. This dataset contains two region identifiers, <code>equipment_group</code> (these values must match those in the equipment dataset) and <code>region_production</code>, that indicate more precisely where feedstocks were produced. <code>region_production</code> values in the default feedstock production dataset correspond to the <a href="https://www.nrcs.usda.gov/wps/portal/nrcs/detail/national/home/?cid=nrcs143_013697">Federal Information Processing Standards</a> (FIPS) codes which identify U.S. counties. If values in the <code>region_production</code> column are not FIPS codes, an additional input file giving the mapping of the <code>region_production</code> values to FIPS values must be provided in order for MOVES and NONROAD to run successfully; this file is discussed further in the Additional input datasets section.</p>
<p>Latitude and longitude values are also specified for feedstock production and destination locations. These values are used in the router engine which calculates minimum-distance routes for on-road biomass transportation between farms or forestry locations and biorefineries. If precise latitude and longitude values are not available for any production or destination locations, these columns can be left blank in the production dataset. Instead, the FIPS for the production and destination locations can be specified, and a lookup table included in the default input data will be used to find the latitude-longitude pairs for the county centroids.</p>
<p>The feedstock production dataset, like the equipment dataset, does not contain the calendar year in which feedstock production took place. This is specified using the <strong>Analysis Year</strong> input in the GUI.</p>
<p>TABLE: List of columns in feedstock production data set with data types and descriptions</p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 29%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column name</th>
<th style="text-align: center;">Data type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">feedstock</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Feedstock being grown; may be food crop, energy feedstock or residue</td>
</tr>
<tr class="even">
<td style="text-align: left;">tillage_type</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Type of tillage practice</td>
</tr>
<tr class="odd">
<td style="text-align: left;">region_production</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Identifies the region where the feedstock is grown</td>
</tr>
<tr class="even">
<td style="text-align: left;">region_destination</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Identifies the region to which the harvested feedstock from this region_production is transported</td>
</tr>
<tr class="odd">
<td style="text-align: left;">equipment_group</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Region identifier; must match equipment_group values in equipment data set</td>
</tr>
<tr class="even">
<td style="text-align: left;">feedstock_measure</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Identifies the value in the feedstock_amount column</td>
</tr>
<tr class="odd">
<td style="text-align: left;">feedstock_amount</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Feedstock amount defined by feedstock_measure, with units given by unit_numerator and unit_denominator</td>
</tr>
<tr class="even">
<td style="text-align: left;">unit_numerator</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Numerator of feedstock_amount unit</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unit_denominator</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Denominator of feedstock_amount unit, if any</td>
</tr>
<tr class="even">
<td style="text-align: left;">source_lon</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Longitude of feedstock production location</td>
</tr>
<tr class="odd">
<td style="text-align: left;">source_lat</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Latitude of feedstock production location</td>
</tr>
<tr class="even">
<td style="text-align: left;">destination_lon</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Longitude of feedstock destination location</td>
</tr>
<tr class="odd">
<td style="text-align: left;">destination_lat</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Latitude of feedstock destination location</td>
</tr>
</tbody>
</table>
<p><strong>Feedstock Loss Factors</strong>. Feedstock dry matter loss is accounted for using loss factors that represent the losses incurred during specific activities and at several key points along the feedstock supply chain. These loss factors were obtained from <a href="https://greet.es.anl.gov/">GREET 2018</a>, from the Herbaceous Feedstock 2018 State of Technology Report prepared by Idaho National Laboratory [1.], and from values reported in the <a href="https://www.energy.gov/sites/prod/files/2016/12/f34/2016_billion_ton_report_12.2.16_0.pdf">2016 Update to the Billion Ton Study, Volume 1</a>. Factors for the farm gate supply chain stage represent on-field covered storage and biorefinery gate factors represent dry matter lost during on-road transportation.</p>
<p>TABLE: Dry matter loss factors by feedstock and supply chain stage.</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 37%" />
<col style="width: 31%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Feedstock</th>
<th style="text-align: left;">Supply Chain Stage</th>
<th style="text-align: center;">Dry Matter Loss</th>
<th style="text-align: left;">Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">corn grain</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: left;">2016 Billion Ton Report, Vol 1, Table 2.7 (derived value)</td>
</tr>
<tr class="even">
<td style="text-align: left;">corn stover</td>
<td style="text-align: left;">farm gate</td>
<td style="text-align: center;">0.12</td>
<td style="text-align: left;">INL, 2018, Table A.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">corn stover</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.02</td>
<td style="text-align: left;">INL, 2018, Figure A.4 (includes preprocessing)</td>
</tr>
<tr class="even">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">farm gate</td>
<td style="text-align: center;">0.08</td>
<td style="text-align: left;">INL, 2018, Table A.6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.02</td>
<td style="text-align: left;">INL, 2018, Figure A.4 (includes preprocessing)</td>
</tr>
<tr class="even">
<td style="text-align: left;">miscanthus</td>
<td style="text-align: left;">farm gate</td>
<td style="text-align: center;">0.12</td>
<td style="text-align: left;">GREET, 2018, EtOH pathway (derived value)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">miscanthus</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.02</td>
<td style="text-align: left;">GREET, 2018, EtOH pathway (includes preprocessing)</td>
</tr>
<tr class="even">
<td style="text-align: left;">sorghum</td>
<td style="text-align: left;">farm gate</td>
<td style="text-align: center;">0.026</td>
<td style="text-align: left;">GREET, 2018, EtOH pathway</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sorghum</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.02</td>
<td style="text-align: left;">GREET, 2018, EtOH pathway</td>
</tr>
<tr class="even">
<td style="text-align: left;">whole trees</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: left;">2016 Billion Ton Report, Vol 1, Table 2.7 (derived value)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">forest residues</td>
<td style="text-align: left;">biorefinery gate</td>
<td style="text-align: center;">0.10</td>
<td style="text-align: left;">2016 Billion Ton Report, Vol 1, Table 2.7 (derived value)</td>
</tr>
</tbody>
</table>
<p>[1.] Roni, M., Thompson, D., Hartley, D., Griffel, M., Hu, H., Nguyen, Q., Cai, H. Herbaceous Feedstock 2018 State of Technology Report. INL/EXT-18-51654. Idaho National Laboratory, September 30, 2018.</p>
<p><strong>Transportation Graph</strong>. To obtain on-road routes for biomass transportation, the router engine uses a graph of all known, publicly accessible roads in the contiguous U.S., obtained from the <a href="http://sedac.ciesin.columbia.edu/data/set/groads-global-roads-open-access-v1">Global Roads Open Access Data Sets</a> (gROADS) v1. This graph does not contain transportation pathways such as rivers, canals and train tracks, and therefore limits the transportation modes that can be used in FPEAM to on-road vehicles.</p>
<p><strong>Node Locations</strong>.</p>
<p><strong>Truck Capacity</strong>. This dataset defines the biomass carrying capacity of one truck in mass units by feedstock.</p>
<p>TABLE: Default truck capacities by feedstock. Source: BTS 2016.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Feedstock</th>
<th style="text-align: center;">Truck capacity (dry short tons/load)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">corn stover</td>
<td style="text-align: center;">17.28</td>
</tr>
<tr class="even">
<td style="text-align: center;">wheat straw</td>
<td style="text-align: center;">17.28</td>
</tr>
<tr class="odd">
<td style="text-align: center;">switchgrass</td>
<td style="text-align: center;">17.28</td>
</tr>
<tr class="even">
<td style="text-align: center;">corn grain</td>
<td style="text-align: center;">17.28</td>
</tr>
<tr class="odd">
<td style="text-align: center;">sorghum stubble</td>
<td style="text-align: center;">21.10</td>
</tr>
<tr class="even">
<td style="text-align: center;">forest residues</td>
<td style="text-align: center;">16.68</td>
</tr>
<tr class="odd">
<td style="text-align: center;">forest whole trees</td>
<td style="text-align: center;">16.68</td>
</tr>
<tr class="even">
<td style="text-align: center;">poplar</td>
<td style="text-align: center;">16.68</td>
</tr>
<tr class="odd">
<td style="text-align: center;">willow</td>
<td style="text-align: center;">16.68</td>
</tr>
</tbody>
</table>
<p>The truck capacity value for forest residues was also used as a proxy value for whole trees, poplar, and willow feedstocks, due to a lack of additional data.</p>
<h3 id="advanced-options">Advanced Options</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/home-advancedoptions.PNG" alt="Screenshot of the Advanced Options section on the Home Tab" /><figcaption>Screenshot of the Advanced Options section on the Home Tab</figcaption>
</figure>
<p><strong>Logging Level</strong>. Select the level of log messages to be displayed in the Results tab and written to a log file as FPEAM runs.</p>
<p><strong>Use Router Engine</strong>. The router engine locates minimum-distance on-road routes between feedstock production and destination locations and calculates the vehicle miles traveled (VMT) in each county for each route. Dijkstra’s algorithm is applied to find the shortest path from the biomass production location to the destination, and the shortest path is used to obtain a list of FIPS through which the biomass is transported as well as the vehicle miles traveled within each FIPS. This information is used with the emission factors obtained from MOVES to calculate emissions within each FIPS where biomass is produced, transported and delivered. Due to MOVES’ long run time, emission factors are not obtained for every FIPS through which biomass is transported; however, this functionality can be added in the future if there is demand. Because the router engine is only used internally to FPEAM, there are no user options for running the router.</p>
<p><strong>Backfill Missing Data</strong>. Users have the option of backfilling any missing numeric data in the input datasets with the default value of 0 or a value of their choice. This option prevents FPEAM from excluding from the results any counties, feedstocks etc. that did not have complete input data for one or more pollutant processes. Instead, the pollutant inventories resulting from incomplete input data will appear in the results as 0. There is no option to backfill categorical and identifier variables (feedstock name, for instance) - if there are missing values in these variables, then the pollutant inventories for those variable values will not be included in the FPEAM results.</p>
<p><strong>Forestry Feedstock Names</strong>. The default feedstock production datasets packaged with FPEAM cover both energy crops and forestry products. The production and harvesting activities are significantly different for forestry feedstocks, and so the forestry feedstocks must be specified and forestry-specific calculation methods applied. Single quotes should be used to define elements in the list of forestry feedstock names. If a forestry feedstock appears in this list but not in the feedstock production and/or equipment use datasets, it will not be included in the final results.</p>
<p><strong>VMT Per Truck</strong>. By default, the router engine is used to calculate vehicle miles traveled (VMT) in each county. Users can choose to not use the router engine and instead specify a flat value for VMT to be used in calculating pollutants from on-road transportation. In this case, on-road transportation pollutants will only be calculated for the county in which feedstock was produced, because the route over which feedstock was transported was not generated. Users are recommended to always use the router engine, in which case the value of this parameter has no impact on FPEAM results.</p>
<h2 id="moves">MOVES</h2>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/moves-top.PNG" alt="Screenshot of the top of the MOVES tab" /><figcaption>Screenshot of the top of the MOVES tab</figcaption>
</figure>
<p>Emissions from feedstock transportation are by default calculated using version 2014b of the EPA’s MOtor Vehicle Emission Simulator (MOVES) model. FPEAM creates all required input files and runs MOVES in batch mode, using a set of parameters listed below to determine at what level of detail MOVES is run. Following the MOVES run(s), emission rates for vehicle operation and start and hotelling are postprocessed with feedstock production data, truck capacity data and feedstock transportation routes to calculate total pollutant amounts.</p>
<p>Currently the FPEAM MOVES module can only run MOVES at the FIPS (county) level. The FIPS for which MOVES is run are determined from <code>region_production</code> values in the feedstock production set, which are mapped to FIPS using the region-to-FIPS map discussed below under Custom Data Filepaths.</p>
<p><strong>Aggregation Level</strong>. MOVES can be run for all FIPS for which a mapping from <code>region_production</code> to FIPS was provided, or at two levels of aggregation: one FIPS per state based on which FIPS had the highest total feedstock production (“By State”), or multiple FIPS per states based on which FIPS had the highest production of each feedstock (“By State-Feedstock”). By default, MOVES is run once per state with FIPS selected based on highest total feedstock production. This aggregation is done by default to keep FPEAM run times reasonable; MOVES requires between 10 and 15 minutes to run each FIPS and can easily extend model run times into days. Users can also select the “By County” aggregation level to run MOVES for every region in which feedstock is produced.</p>
<p><strong>Use Cached Results</strong>. When True is selected, any MOVES results already saved to the MOVES output database (specified under Database Connection Parameters on this tab) for the FIPS being analyzed will be used instead of running MOVES again.</p>
<p><strong>Executable Path</strong>. This is the directory where MOVES is installed. Use this input to select between MOVES 2014a and 2014b, if necessary.</p>
<p><strong>MOVES Datafiles</strong>. This directory is where the batch and other input files created for the current scenario are saved.</p>
<p><strong>Feedstock Measure Type</strong>. The feedstock production dataset has several feedstock measure types. For MOVES, specify the measure type that has mass units (dry short tons, in the case of the default dataset). The feedstock mass produced in each county will then be used to calculate the number of farm-to-biorefinery trips required.</p>
<h3 id="database-connection-parameters">Database Connection Parameters</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/moves-databaseconnectionparams.PNG" alt="Screenshot of the Database Connection Parameters section of the MOVES tab." /><figcaption>Screenshot of the Database Connection Parameters section of the MOVES tab.</figcaption>
</figure>
<p><strong>Database Host</strong>. The Host is the machine on which the MOVES databases are installed. For users running FPEAM locally, the database host should always be left as the default.</p>
<p><strong>MOVES Database</strong>. This specifies the name of the default database installed with MOVES that contains input data used in running MOVES. The default database is always named as <code>movesdb</code> plus the date on which the database was last updated, which will vary depending on when MOVES was installed.</p>
<p><strong>Output Database</strong>. Pollutant rates calculated by MOVES are saved to this SQL database and read in by FPEAM for additional postprocessing and pollutant inventory calculation. Users can specify either an existing database (other than the MOVES default database) or a new database; if the specified database does not exist, FPEAM will create it automatically. It is not necessary to create a new output database for every FPEAM run.</p>
<p><strong>Username</strong> and <strong>Password</strong>. These are the credentials set up during the MySQL installation process.</p>
<p><strong>MySQL Exe</strong> and <strong>MySQL Dump Exe</strong>. Define the path to the executables <code>mysql.exe</code> and <code>mysqldump.exe</code>. The paths should be very similar to the defaults although the MySQL Server version may change depending on when it was installed.</p>
<h3 id="execution-timeframe">Execution Timeframe</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/moves-executiontimeframe.PNG" alt="Screenshot of the Execution Timeframe section of the MOVES tab." /><figcaption>Screenshot of the Execution Timeframe section of the MOVES tab.</figcaption>
</figure>
<p><strong>Analysis Year</strong>. The year in which feedstock is grown and harvested. This value must match the analysis year defined on the NONROAD tab, and should correspond to the year of the feedstock production dataset being used. If the MOVES and NONROAD years do not match, then FPEAM cannot be run.</p>
<p><strong>Month</strong>. The month in which the transportation takes place. The default value of 10 indicates October.</p>
<p><strong>Day Type</strong>. Whether the transportation took place on a weekday (5) or weekend (2) day.</p>
<p><strong>Beginning Hour</strong> and <strong>Ending Hour</strong>. These define the time of day during which the transportation takes place. The default values are 0700 and 1800, or between 7am and 6pm.</p>
<p>This execution timeframe represents a typical post-harvest day for most feedstocks.</p>
<h3 id="custom-data-filepaths-1">Custom Data Filepaths</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/moves-customdatafilepaths.PNG" alt="Screenshot of the Custom Data Filepaths section of the MOVES tab." /><figcaption>Screenshot of the Custom Data Filepaths section of the MOVES tab.</figcaption>
</figure>
<p><strong>AVFT</strong>. This dataset (“Alternative Vehicle and Fuels Technology”) defines the vehicle fleet in use during the execution timeframe. Custom AVFT files can be generated using MOVES itself; however, the default file should suffice for present-day and near-future scenarios.</p>
<p><strong>Region to FIPS Map</strong>. The region to FIPS map provides a mapping of region identifiers to FIPS. In the case that the input datasets are based on FIPS, this dataset can be ignored.</p>
<h3 id="vmt-fractions">VMT Fractions</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/moves-vmtfractions.PNG" alt="Screenshot of the VMT Fractions section of the MOVES tab." /><figcaption>Screenshot of the VMT Fractions section of the MOVES tab.</figcaption>
</figure>
<p><strong>Restricted</strong> roads are accessed by entrance and exit ramps, including highways. <strong>Unrestricted</strong> roads are all other roads.</p>
<p>Default vehicle miles traveled (VMT) fractions were calculated from Federal Highway Administration data on total vehicle miles traveled nationwide by combination trucks in 2006. The raw data is available from the <a href="https://www.fhwa.dot.gov/policy/ohim/hs06/metric_tables.cfm">Federal Highway Administration</a> in the table “Vehicle distance of travel in kilometers and related data, by highway category and vehicle type.” The VMT fraction representing vehicle idling (road type = 1) was assumed to be 0 due to lack of data and is hard-coded within FPEAM.</p>
<p>TABLE: Default VMT fraction values.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">Road type</th>
<th style="text-align: left;">Road type description</th>
<th style="text-align: center;">VMT fraction value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: left;">Vehicle idling</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: left;">Rural restricted</td>
<td style="text-align: center;">0.30</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: left;">Rural unrestricted</td>
<td style="text-align: center;">0.28</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: left;">Urban restricted</td>
<td style="text-align: center;">0.21</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: left;">Urban unrestricted</td>
<td style="text-align: center;">0.21</td>
</tr>
</tbody>
</table>
<h3 id="advanced-options-1">Advanced Options</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/moves-advancedoptions.PNG" alt="Screenshot of the Advanced Options section of the MOVES tab." /><figcaption>Screenshot of the Advanced Options section of the MOVES tab.</figcaption>
</figure>
<p><strong>Number of Trucks Used</strong>. The number of trucks used for feedstock transportation. If this number is increased then emissions per vehicle and per vehicle start/stop will increase but emissions for vehicle miles traveled will remain the same. Changing this parameter is unlikely to have a significant impact on the overall pollutant inventory.</p>
<p><strong>HPMSV ID</strong>. Highway Performance Monitoring System Vehicle ID are integers indicating vehicle classes. The default is 60 which indicates a generic combination truck.</p>
<p><strong>Source Type ID</strong>. Source Type ID are IDs specific to MOVES that specify the vehicle type in more detail. The default is 61 which indicates a short-haul combination truck.</p>
<h2 id="nonroad">NONROAD</h2>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-top.PNG" alt="Screenshot of the top of the NONROAD tab." /><figcaption>Screenshot of the top of the NONROAD tab.</figcaption>
</figure>
<p><strong>Data Folder</strong>. This directory is where the input and output files associated with NONROAD will be saved. Because NONROAD cannot parse filepaths longer than 30 characters, it is strongly recommended to create the <code>C:/Nonroad</code> directory rather than using a Documents or other directory.</p>
<p><strong>Path to EXE</strong> (executable). Because NONROAD is installed as part of MOVES, this directory will always be a subdirectory of wherever MOVES was installed. If MOVES was installed to the pre-selected directory rather than the C:2014b directory recommended above, then this filepath will need to be changed. <em>Please note</em> that if MOVES was not installed into C:2014b or a similarly named directory, NONROAD will not be able to process filepaths for any input data because the filepaths will be longer than 30 characters.</p>
<p><strong>Analysis Year</strong>. The analysis years defined on this tab and on the MOVES tab need to match each other; if the years do not match, FPEAM cannot be run and an error will be displayed on the GUI. The two analysis year inputs should also match the year for which the feedstock production dataset is valid.</p>
<h3 id="database-connection-parameters-1">Database Connection Parameters</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-databaseconnectionparams.PNG" alt="Screenshot of the Database Connection Parameters section of the NONROAD tab." /><figcaption>Screenshot of the Database Connection Parameters section of the NONROAD tab.</figcaption>
</figure>
<p>These values should be identical to the same parameters under the MOVES tab. The <strong>Database Name</strong> refers to the default MOVES database, not the MOVES output database. NONROAD writes results to individual files rather than an output database, and so no output database needs to be specified.</p>
<h3 id="data-labels">Data Labels</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-datalabels.PNG" alt="Screenshot of the Data Labels section of the NONROAD tab." /><figcaption>Screenshot of the Data Labels section of the NONROAD tab.</figcaption>
</figure>
<p><strong>Feedstock Measure Type</strong> and <strong>Irrigation Feedstock Measure Type</strong>. In the default equipment use dataset, many activities are defined by resource consumption per feedstock measure. The feedstock measure type parameters here define which measure should be used to scale up these activities to calculate total pollutants generated. In the default feedstock production datasets “harvested” is in units of acres, so this feedstock measure type is used to scale activities including fertilizer application, herbicide application, and plowing which are all given per acre in the equipment use dataset. For irrigation, we assume that the entire planted acreage is irrigated (where irrigation is used) and so the feedstock measure type used to scale irrigation activities is “planted”. The units are still acres.</p>
<p><strong>Irrigation Feedstock Name</strong>. This is the list of feedstocks from the feedstock production dataset for which irrigation activity data is available. If a feedstock in this list has either no production data or no irrigation activity data, it will be ignored.</p>
<p><strong>Time Resource Name</strong>. NONROAD calculates pollutants based on how many hours equipment is being operated. This parameter specifies which rows in the equipment use dataset give the hours per acre that each piece of equipment is operated. If the value specified for this parameter does not match the actual time resource name in the equipment use dataset, then NONROAD may not return any results because no data was selected.</p>
<h3 id="custom-data-filepaths-2">Custom Data Filepaths</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-customdatafilepaths.PNG" alt="Screenshot of the Custom Data Filepaths section of the NONROAD tab." /><figcaption>Screenshot of the Custom Data Filepaths section of the NONROAD tab.</figcaption>
</figure>
<p><strong>Irrigation Activity</strong>. This is the dataset derived from the 2012 Farm and Ranch Irrigation Survey, and gives pump use in hours per acre for irrigated corn grain, as well as pump specifications such as horsepower.</p>
<p><strong>Equipment Specs</strong> (specifications): NONROAD identifies equipment based on Source Characterization Codes (SCCs) and equipment horsepower. In the default equipment data set, SCCs were not provided, so this additional input file mapping equipment names from the equipment dataset to equipment SCCs is supplied as well. A portion of this input file is given in the table below. SCCs for equipment types included in NONROAD but not used in the default equipment dataset may be found in Appendix B of the <a href="https://www.epa.gov/moves/nonroad-model-nonroad-engines-equipment-and-vehicles#user%20guide">NONROAD User Guide</a>.</p>
<p>TABLE: Sample entries from the nonroad_equipment input dataset. Equipment descriptions in this file are added to NONROAD input files but are not necessary for NONROAD to run, thus the descriptions may be left blank if desired.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Equipment name</th>
<th style="text-align: left;">Equipment description</th>
<th style="text-align: center;">Source Characterization Code (SCC)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">whole tree chipper (large)</td>
<td style="text-align: left;">Dsl - Chippers/Stump Grinders (com)</td>
<td style="text-align: center;">2270004066</td>
</tr>
<tr class="even">
<td style="text-align: left;">loader (2 row)</td>
<td style="text-align: left;">Dsl - Forest Eqp - Feller/Bunch/Skidder</td>
<td style="text-align: center;">2270007015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">combine (2wd)</td>
<td style="text-align: left;">Dsl - Combines</td>
<td style="text-align: center;">2270005020</td>
</tr>
<tr class="even">
<td style="text-align: left;">tractor 2wd 150 hp</td>
<td style="text-align: left;">Dsl - Agricultural Tractors</td>
<td style="text-align: center;">2270005015</td>
</tr>
</tbody>
</table>
<p><strong>Region to FIPS Map</strong>. The region to FIPS map provides a mapping of region identifiers (<code>region_production</code> and <code>region_destination</code>) to FIPS. In the case that the input datasets are based on FIPS, this dataset can be ignored.</p>
<h3 id="operating-temperature">Operating Temperature</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-operatingtemperature.PNG" alt="Screenshot of the Operating Temperature section of the NONROAD tab." /><figcaption>Screenshot of the Operating Temperature section of the NONROAD tab.</figcaption>
</figure>
<p>These temperatures in degrees Fahrenheit give the minimum, maximum and mean expected ambient (outdoor) temperatures for operation of all agricultural and forestry equipment.</p>
<h3 id="conversion-factors">Conversion Factors</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-conversionfactors.PNG" alt="Screenshot of the Conversion Factors section of the NONROAD tab." /><figcaption>Screenshot of the Conversion Factors section of the NONROAD tab.</figcaption>
</figure>
<p>NONROAD does not directly calculate NH<sub>3</sub> emissions or volatile organic carbon (VOC) emissions or PM<sub>10</sub> emissions, thus these factors are necessary to calculate NH<sub>3</sub> emissions from total diesel consumption, VOC from total hydrocarbon emissions, and PM<sub>2.5</sub>emissions from PM<sub>10</sub> emissions. The NH<sub>3</sub> emission factor is sourced from the <a href="https://www.epa.gov/statelocalclimate/co-benefits-risk-assessment-cobra-screening-model.">COBRA Screening Model</a> developed by the U.S. EPA, and the total hydrocarbon to VOC conversion factor is sourced from EPA NONROAD Conversion Factors for Hydrocarbon Emission Components.</p>
<h3 id="advanced-options-2">Advanced Options</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/nonroad-advancedoptions.PNG" alt="Screenshot of the Advanced Options section of the NONROAD tab." /><figcaption>Screenshot of the Advanced Options section of the NONROAD tab.</figcaption>
</figure>
<p><strong>Encode Names</strong>. NONROAD generates, reads and writes a great many input and output files as it runs. Because NONROAD cannot process filenames longer than 30 characters, the option to encode names converts longer filenames to abbreviated versions. If this option is set to False, NONROAD may not execute properly or may not return all of the expected results.</p>
<h2 id="emission-factors">Emission Factors</h2>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/emissionfactors-top.PNG" alt="Screenshot of the top of the Emission Factors tab." /><figcaption>Screenshot of the top of the Emission Factors tab.</figcaption>
</figure>
<p><strong>Feedstock Measure Type</strong>. As seen previously, the Emission Factors calculation runs off a specific measure of feedstock, in this case <code>harvested</code> which is in units of acres. Acres are required because the emission factors calculation also uses resource rates from the equipment dataset, which are in units of mass per acre. An alternative to using <code>harvested</code> would be <code>planted</code>, although in the default feedstock production datasets the <code>planted</code> amounts tend to be higher than <code>harvested</code> (that is, more acreage is planted than is harvested) which may over-estimate some pollutants.</p>
<h3 id="custom-data-filepaths-3">Custom Data Filepaths</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/emissionfactors-customdatafilepaths.PNG" alt="Screenshot of the Custom Data Filepaths section of the Emission Factors tab." /><figcaption>Screenshot of the Custom Data Filepaths section of the Emission Factors tab.</figcaption>
</figure>
<p><strong>Emission Factors</strong>. Default emission factors are provided for each relevant combination of resource subtype and pollutant, as demonstrated in the table below. The unit denominator (both unit columns refer to the emission factor) must match the resource unit from the equipment use dataset. For instance, if insecticide use is quantified as gallons per dry short ton of feedstock, the emission factor here must be in pounds of pollutant per gallon of insecticide. The activity column specifies which supply chain activity causes the resource use and thus the pollutant emissions.</p>
<p>TABLE: Default emissions factors for NO (used as a proxy for NO<sub>x</sub>) and NH<sub>3</sub> from nitrogen fertilizers and VOC from herbicides and insecticides. NO emission factors were obtained from FOA (2001) and GREET (ANL 2010). NH<sub>3</sub> factors were obtained from Goebes et al. 2003, Davidson et al. 2004 and the 17/14 ratio of NH<sub>3</sub> to N. See <a href="https://onlinelibrary.wiley.com/doi/full/10.1002/bbb.1620">Zhang et al. (2015)</a> for additional information. Note that as of July 2, 2018 the Davidson et al. reference, the CMU Ammonia Model, Version 3.6 from The Environmental Institute at Carnegie Mellon University was not available online and source data could not be verified.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 7%" />
<col style="width: 25%" />
<col style="width: 19%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">resource</th>
<th style="text-align: left;">resource subtype</th>
<th style="text-align: left;">activity</th>
<th style="text-align: center;">pollutant</th>
<th style="text-align: center;">emission_factor</th>
<th style="text-align: center;">unit_numerator</th>
<th style="text-align: center;">unit_denominator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">anhydrous ammonia</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">no<sub>x</sub></td>
<td style="text-align: center;">0.79</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="even">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">anhydrous ammonia</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">nh<sub>3</sub></td>
<td style="text-align: center;">4.86</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium nitrate (33.5% N)</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">no<sub>x</sub></td>
<td style="text-align: center;">3.80</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="even">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium nitrate (33.5% N)</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">nh<sub>3</sub></td>
<td style="text-align: center;">2.32</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium sulfate</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">no<sub>x</sub></td>
<td style="text-align: center;">3.50</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="even">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium sulfate</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">nh<sub>3</sub></td>
<td style="text-align: center;">11.6</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">urea (44 - 46% N)</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">no<sub>x</sub></td>
<td style="text-align: center;">0.90</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="even">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">urea (44 - 46% N)</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">nh<sub>3</sub></td>
<td style="text-align: center;">19.2</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">nitrogen solutions</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">no<sub>x</sub></td>
<td style="text-align: center;">0.79</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="even">
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">nitrogen solutions</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">nh<sub>3</sub></td>
<td style="text-align: center;">9.71</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="odd">
<td style="text-align: left;">herbicide</td>
<td style="text-align: left;">generic herbicide</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">voc</td>
<td style="text-align: center;">0.75</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
<tr class="even">
<td style="text-align: left;">insecticide</td>
<td style="text-align: left;">generic insecticide</td>
<td style="text-align: left;">chemical application</td>
<td style="text-align: center;">voc</td>
<td style="text-align: center;">0.75</td>
<td style="text-align: center;">pound</td>
<td style="text-align: center;">pound</td>
</tr>
</tbody>
</table>
<p><strong>Resource Distribution</strong>. The default resource distribution file, a portion of which is shown in the first table below, specifies how much of each resource type such as nitrogen, herbicide and so on consists of various resource subtypes such as specific nitrogen fertilizers or herbicide brands. Currently the resource distribution table must be supplied for FPEAM to run correctly. However, users can include the resource subtypes directly in the equipment use dataset and populate the distribution column of the resource distribution file with the values 1 if desired.</p>
<p>TABLE: The default resource subtype distribution data file defines the nitrogen fertilizer distribution among five common nitrogenous fertilizers and the distribution of herbicide and insecticide to generics. The nitrogen fertilizer distribution varies between feedstocks. The national average distribution from 2010 <a href="https://www.ers.usda.gov/data-products/fertilizer-use-and-price.aspx#26720">(USDA)</a> is used for corn grain and stover, sorghum stubble, and wheat straw. The perennial feedstock distribution which consists of nitrogen solutions only is used for switchgrass, miscanthus and all forest products. (Turhollow, 2011, personal communication). Two example distributions are shown in the table.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">feedstock</th>
<th style="text-align: left;">resource</th>
<th style="text-align: left;">resource_subtype</th>
<th style="text-align: center;">distribution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">corn grain</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">anhydrous ammonia</td>
<td style="text-align: center;">0.3404</td>
</tr>
<tr class="even">
<td style="text-align: left;">corn grain</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium nitrate</td>
<td style="text-align: center;">0.0247</td>
</tr>
<tr class="odd">
<td style="text-align: left;">corn grain</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium sulfate</td>
<td style="text-align: center;">0.0179</td>
</tr>
<tr class="even">
<td style="text-align: left;">corn grain</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">urea</td>
<td style="text-align: center;">0.2542</td>
</tr>
<tr class="odd">
<td style="text-align: left;">corn grain</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">nitrogen solutions</td>
<td style="text-align: center;">0.3528</td>
</tr>
<tr class="even">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">anhydrous ammonia</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium nitrate</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">ammonium sulfate</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">urea</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: left;">nitrogen</td>
<td style="text-align: left;">nitrogen solutions</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">eucalyptus</td>
<td style="text-align: left;">herbicide</td>
<td style="text-align: left;">generic herbicide</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">wheat</td>
<td style="text-align: left;">insecticide</td>
<td style="text-align: left;">generic insecticide</td>
<td style="text-align: center;">1</td>
</tr>
</tbody>
</table>
<h2 id="fugitive-dust">Fugitive Dust</h2>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/fugitivedust-top.PNG" alt="Screenshot of the top of the Fugitive Dust tab." /><figcaption>Screenshot of the top of the Fugitive Dust tab.</figcaption>
</figure>
<p><strong>On-Farm Feedstock Measure Type</strong> and <strong>On-Road Feedstock Measure Type</strong>. Fugitive dust generated on the farm is calculated from PM<sub>10</sub> and PM<sub>2.5</sub> rates per acre, while on-road fugitive dust is calculated from the number of trips required to transport the feedstock. Thus the on-farm fugitive dust is calculated from <code>harvested</code> feedstock (units of acres) while on-road fugitive dust is calculated from <code>production</code> (units of dry short tons).</p>
<h3 id="custom-data-filepaths-4">Custom Data Filepaths</h3>
<figure>
<img src="https://github.com/NREL/fpeam/blob/dev/src/FPEAM/gui/screenshots/fugitivedust-customdatafilepaths.PNG" alt="Screenshot of the Custom Data Filepaths section of the Fugitive Dust tab." /><figcaption>Screenshot of the Custom Data Filepaths section of the Fugitive Dust tab.</figcaption>
</figure>
<p><strong>On-Farm Factors</strong>. On-farm fugitive dust is calculated from PM<sub>10</sub> and PM<sub>2.5</ub> emission factors given in this dataset.</p>
<p>TABLE: List of columns and data types in fugitive dust emissions factors dataset.</p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 29%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Column name</th>
<th style="text-align: center;">Data type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">feedstock</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Feedstock being grown</td>
</tr>
<tr class="even">
<td style="text-align: left;">tillage_type</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Type of tillage practice</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pollutant</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Identifies if the rate is for PM<sub>10</sub> or PM<sub>2.5</sub></td>
</tr>
<tr class="even">
<td style="text-align: left;">rate</td>
<td style="text-align: center;">float</td>
<td style="text-align: left;">Amount of fugitive dust generated per acre for the feedstock specified in an average year</td>
</tr>
<tr class="odd">
<td style="text-align: left;">unit_numerator</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Numerator of rate unit</td>
</tr>
<tr class="even">
<td style="text-align: left;">unit_denominator</td>
<td style="text-align: center;">string</td>
<td style="text-align: left;">Denominator of rate unit</td>
</tr>
</tbody>
</table>
<p>TABLE: Example rows in the fugitive dust emissions factors dataset. Source: BTS 2016.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">feedstock</th>
<th style="text-align: left;">tillage_type</th>
<th style="text-align: center;">pollutant</th>
<th style="text-align: center;">rate</th>
<th style="text-align: left;">unit_numerator</th>
<th style="text-align: left;">unit_denominator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">sorghum stubble</td>
<td style="text-align: left;">conventional tillage</td>
<td style="text-align: center;">PM<sub>10</sub></td>
<td style="text-align: center;">1.7</td>
<td style="text-align: left;">pound</td>
<td style="text-align: left;">acre</td>
</tr>
<tr class="even">
<td style="text-align: left;">sorghum stubble</td>
<td style="text-align: left;">conventional tillage</td>
<td style="text-align: center;">PM<sub>25</sub></td>
<td style="text-align: center;">0.34</td>
<td style="text-align: left;">pound</td>
<td style="text-align: left;">acre</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sorghum stubble</td>
<td style="text-align: left;">conventional tillage</td>
<td style="text-align: center;">PM<sub>10</sub></td>
<td style="text-align: center;">0</td>
<td style="text-align: left;">pound</td>
<td style="text-align: left;">acre</td>
</tr>
<tr class="even">
<td style="text-align: left;">sorghum stubble</td>
<td style="text-align: left;">conventional tillage</td>
<td style="text-align: center;">PM<sub>25</sub></td>
<td style="text-align: center;">0</td>
<td style="text-align: left;">pound</td>
<td style="text-align: left;">acre</td>
</tr>
</tbody>
</table>
<p><strong>On-Road Constants</strong>. The on-road fugitive dust calculation is more involved and requires empirical constants defined in this dataset. For details on the equations used, see the Fugitive Dust subsection of Module Calculations and Assumptions below.</p>
<p>TABLE: Parameter values for calculating particulate matter from feedstock transportation over paved roads. Source: BTS 2016.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">P</th>
<th style="text-align: center;">k<sub>P</sub> (lb/VMT)</th>
<th style="text-align: center;">a<sub>P</sub></th>
<th style="text-align: center;">b<sub>P</sub></th>
<th style="text-align: center;">s<sub>L</sub> (g/m<sup>2</sup>)</th>
<th style="text-align: center;">W (short tons)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">PM<sub>10</sub></td>
<td style="text-align: center;">0.0022</td>
<td style="text-align: center;">0.91</td>
<td style="text-align: center;">1.02</td>
<td style="text-align: center;">0.045</td>
<td style="text-align: center;">3.2</td>
</tr>
<tr class="even">
<td style="text-align: center;">PM<sub>2.5</sub></td>
<td style="text-align: center;">0.00054</td>
<td style="text-align: center;">0.91</td>
<td style="text-align: center;">1.02</td>
<td style="text-align: center;">0.045</td>
<td style="text-align: center;">3.2</td>
</tr>
</tbody>
</table>
<p>TABLE: Parameter values for calculating particulate matter from feedstock transportation over unpaved roads. Source: BTS 2016.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">P</th>
<th style="text-align: center;">k<sub>P</sub> (lb/VMT)</th>
<th style="text-align: center;">a<sub>P</sub></th>
<th style="text-align: center;">b<sub>P</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">PM<sub>10</sub></td>
<td style="text-align: center;">1.5</td>
<td style="text-align: center;">0.9</td>
<td style="text-align: center;">0.45</td>
</tr>
<tr class="even">
<td style="text-align: center;">PM<sub>2.5</sub></td>
<td style="text-align: center;">0.15</td>
<td style="text-align: center;">0.9</td>
<td style="text-align: center;">0.45</td>
</tr>
</tbody>
</table>
<p><strong>Road Silt Content</strong>. Silt content of primary roads by state is another dataset required to calculate on-road fugitive dust.</p>
<p>TABLE: Sample values for silt content (s<sub>st</sub>). The complete list can be found in the <code>fugitive_dust_silt_content</code> CSV file in the default input data set. Source: BTS 2016.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">st</th>
<th style="text-align: center;">s<sub>st</sub></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Alabama</td>
<td style="text-align: center;">3.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Alaska</td>
<td style="text-align: center;">3.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Arizona</td>
<td style="text-align: center;">3.0</td>
</tr>
</tbody>
</table>
<h2 id="results">Results</h2>
<p>There are no input options on the Results tab, which appears blank when the GUI is first opened and before a scenario is run. While FPEAM is running, log outputs will appear on this tab. After a scenario has completed, basic visualizations will be shown.</p>
<h1 id="module-calculations-and-assumptions">Module Calculations and Assumptions</h1>
<h2 id="moves-1">MOVES</h2>
<p>The MOVES module performs all functions necessary to run MOVES for a single FPEAM scenario, including creating input data files, creating XML files for importing data and defining MOVES runs, executing MOVES, calling the router engine to find transportation routes, and postprocessing raw MOVES results into pollutant amounts by FIPS.</p>
<p>MOVES requires two types of input files: national files, which are used for all FIPS, and county files which vary by FIPS. The methods <code>_create_national_data</code> and <code>_create_county_data</code> create the national and county input files using data pulled from the default MOVES database and user input data and parameters. <code>_create_national_data</code> is run only once per FPEAM scenario (the files will change based on the scenario year and vehicle selection) while <code>_create_county_data</code> is run for every relevant FIPS. Both types of input files are saved to the MOVES data directory and currently are overwritten if a different data directory is not specified for each FPEAM scenario. National input files are named according to their contents, and county input files are further identified by the corresponding FIPS.</p>
<p>The files that MOVES uses to find input data and execute runs are both XML files. One file controls the input data import and is created in the <code>_create_xml_import</code> method; the other file (“runspec”) controls the MOVES run specifications and is created in the <code>_create_xml_runspec</code> method. Both methods are run once for every FIPS in an FPEAM scenario. The import and runspec file are saved in the MOVES data directory and named according to the corresponding FIPS and scenario year. Runspec and import files are overwritten if multiple FPEAM scenarios with the same FIPS and scenario year are run.</p>
<p>After MOVES is run, the <code>postprocess</code> method is used to extract raw MOVES output from the MOVES output database and calculate emission rates per vehicle (for start and hotelling emissions) and per vehicle-mile (for transportation emissions). <code>postprocess</code> also calls the Router module to obtain vehicle miles traveled through each FIPS involved in a transportation routes. Output of the Router module is used with the emission rates per vehicle-mile to calculate total pollutants in every FIPS through which biomass is transported. The <code>postprocess</code> method is called only once per FPEAM scenario, and creates a data table of pollutants that is combined with the output from other modules to create the overall FPEAM results.</p>
<p>Each of these methods is called by the <code>run</code> method, which also preprocesses a copy of the feedstock production dataset to determine for which FIPS MOVES should be run. User input parameters determine if MOVES is run once per state, several times per state, or for every FIPS in the input database, and are combined with the feedstock production dataset to pull out a list of FIPS to run MOVES on. <code>run</code> also calls the <code>_get_cached_results</code> method which checks the MOVES output database to determine if raw MOVES results already exist for any of the FIPS and years involved in an FPEAM scenario. Users can opt to use these cached results with the use_cached_results parameter or run MOVES for every FIPS regardless of whether results already exist.</p>
<h2 id="nonroad-1">NONROAD</h2>
<p>The NONROAD module has very similar functionality to the MOVES module; input files for running the model are created and saved, and batch files are used to run NONROAD on the input files. A separate postprocessing method for raw NONROAD output reads in the output files, concatenates the output from various runs together, and adds identifier columns.</p>
<p>The input files NONROAD needs to run are allocate, population and options files, created respectively by the <code>create_allocate_files</code>, <code>create_population_files</code> and <code>create_options_files</code> methods. The allocate files contain indicators for each FIPS within a particular state that, if county-level input data is not provided, are used to allocate state-wide pollutants to the county level. When NONROAD is run via FPEAM, the county-level input data is always provided and so the allocate files are overruled; however, they must be provided for NONROAD to run. The population files are created from the equipment use dataset and information on annual equipment use in the default MOVES database. The <code>create_population_files</code> method calculates the number of each equipment type needed per NONROAD run and writes the population to file.</p>
<p>Options files for NONROAD are similar to runspec files for MOVES. They contain specifications for the population and allocate files for a particular NONROAD run, default data, and FPEAM-scenario-specific information such as the year and temperature range. For every valid options file passed to NONROAD, one output file is generated.</p>
<p>After the input files have been generated, the <code>create_batch_files</code> method creates batch files for every NONROAD run and master batch files for every state in which NONROAD will be run. The master batch file calls the batch files for the runs defined by the options file.</p>
<p>The <code>run</code> method calls all other methods including the <code>postprocess</code> method. Postprocessing is different for NONROAD than for MOVES because NONROAD writes raw results to individual text files (one file per NONROAD run) with the extension .out. Postprocessing then involves gathering each .out file, extracting the FPEAM-relevant data, calculating a few pollutants that are not returned by NONROAD, and then concatenating and formatting the NONROAD results so they can be combined with the results of other modules.</p>
<h2 id="emission-factors-1">Emission Factors</h2>
<p>The EmissionFactors module was developed from a module in the previous version of FPEAM that calculated NO<sub>x</sub> and NH<sub>3</sub> emissions from nitrogen fertilizer application and VOC emissions from herbicide and insecticide application. Rather than limit the module functionality to these pollutants and pollutant causes, the EmissionFactors module was written to calculate any pollutant from any pollutant process if sufficient input data is provided. This flexibility allows users to model pollutants from other fertilizers and agricultural chemicals, and could allow EmissionFactors to replace MOVES and NONROAD in the calculation of agricultural equipment and transportation vehicle emissions, albeit with a loss in spatial detail.</p>
<p>VOC emission factors from application of herbicides and insecticides were calculated from the following equation: (<a href="https://onlinelibrary.wiley.com/doi/full/10.1002/bbb.1620">Zhang et al., 2015</a>):</p>
<p>VOC (lb/acre/year) = R * I * ER * C<sub>VOC</sub></p>
<p>where R is the pesticide or herbicide application rate (lb/harvested acre/year), I is the amount of active ingredient per pound of pesticide or herbicide (lb active ingredient/lb chemical, assumed to be 1), ER is the evaporation rate (assumed to be 0.9 per EPA recommendations from emissions inventory improvement program guidance) and C<sub>VOC</sub> is the VOC content in the active ingredient (lb VOC/lb active ingredient, assumed to be 0.835) ( <a href="https://www.epa.gov/air-emissions-inventories/2011-national-emissions-inventory-nei-technical-support-document">Huntley 2015</a> ).</p>
<h2 id="fugitive-dust-1">Fugitive Dust</h2>
<p>The fugitive dust module calculates PM<sub>2.5</sub> and PM<sub>10</sub> emissions from on-farm (harvest and non-harvest) activities and on-road feedstock transportation over paved and unpaved roads.</p>
<p>On-road PM<sub>10</sub> and PM<sub>2.5</sub> emissions are calculated using empirical functions, parameters and data from (<a href="https://www3.epa.gov/ttn/chief/ap42/ch13/final/c13s0202.pdf">EPA 2006</a>, <a href="https://www3.epa.gov/ttn/chief/ap42/ch13/final/c13s0201.pdf">EPA 2011</a>), <a href="https://inldigitallibrary.inl.gov/sti/6038147.pdf">INL 2016</a> and <a href="http://energy.gov/sites/prod/files/2016/07/f33/2016_billion_ton_report_0.pdf">DOE 2016</a>. Additional information is available in the Appendix to Chapter 9 of the Billion Ton Study 2016 Update.</p>
<p>EQUATION: On-paved-road particulate matter (<em>P = {PM<sub>10</sub>, PM<sub>2.5</sub>}</em>) in lb per vehicle mile traveled over paved roads. Values for parameters <a href="https://www.codecogs.com/eqnedit.php?latex=\inline&space;k_P,&space;s_L,&space;a_P,&space;W" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\inline&space;k_P,&space;s_L,&space;a_P,&space;W" title="k_P, s_L, a_P, W" /></a> and <a href="https://www.codecogs.com/eqnedit.php?latex=\inline&space;b_P" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\inline&space;b_P" title="b_P" /></a> are given in the table following.</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex=\text{Rate}_P\text{&space;(lb/VMT)}&space;=&space;k_P&space;s_L^{a_P}&space;W^{b_P}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\text{Rate}_P\text{&space;(lb/VMT)}&space;=&space;k_P&space;s_L^{a_P}&space;W^{b_P}" title="\text{Rate}_P\text{ (lb/VMT)} = k_P s_L^{a_P} W^{b_P}" /></a></p>
<p>EQUATION: On-unpaved-road particulate matter (<em>P = {PM<sub>10</sub>, PM<sub>2.5</sub>}</em>) in lb per vehicle mile traveled over unpaved roads. Parameter values for k<sub>P</sub>, a<sub>P</sub> and b<sub>P</sub> are given in the table following. The silt content parameter s<sub>st</sub> varies by state; a partial list of values are given in the second table following.</p>
<p><a href="https://www.codecogs.com/eqnedit.php?latex=\text{Rate}_P&space;\text{&space;(lb/VMT)}&space;=&space;k_P&space;\left&space;(&space;\frac{s_{st}}{12}&space;\right&space;)^{a_P}&space;\left&space;(&space;\frac{W}{3}&space;\right&space;)^{b_P}" target="_blank"><img src="https://latex.codecogs.com/gif.latex?\text{Rate}_P&space;\text{&space;(lb/VMT)}&space;=&space;k_P&space;\left&space;(&space;\frac{s_{st}}{12}&space;\right&space;)^{a_P}&space;\left&space;(&space;\frac{W}{3}&space;\right&space;)^{b_P}" title="\text{Rate}_P \text{ (lb/VMT)} = k_P \left ( \frac{s_{st}}{12} \right )^{a_P} \left ( \frac{W}{3} \right )^{b_P}" /></a></p>
<h2 id="miscellaneous-1">Miscellaneous</h2>
<p>TABLE: Feedstock bushel weight in dry short tons.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">feedstock</th>
<th style="text-align: center;">dry short tons per bushel</th>
<th style="text-align: center;">source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">barley</td>
<td style="text-align: center;">0.020</td>
<td style="text-align: center;">1.</td>
</tr>
<tr class="even">
<td style="text-align: left;">corn</td>
<td style="text-align: center;">0.024</td>
<td style="text-align: center;">1.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">cotton</td>
<td style="text-align: center;">0.015</td>
<td style="text-align: center;">1.</td>
</tr>
<tr class="even">
<td style="text-align: left;">oats</td>
<td style="text-align: center;">0.014</td>
<td style="text-align: center;">1.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rice</td>
<td style="text-align: center;">0.019</td>
<td style="text-align: center;">2.</td>
</tr>
<tr class="even">
<td style="text-align: left;">sorghum</td>
<td style="text-align: center;">0.020</td>
<td style="text-align: center;">1.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">soybeans</td>
<td style="text-align: center;">0.026</td>
<td style="text-align: center;">1.</td>
</tr>
<tr class="even">
<td style="text-align: left;">wheat</td>
<td style="text-align: center;">0.026</td>
<td style="text-align: center;">1.</td>
</tr>
</tbody>
</table>
<ol type="1">
<li>Murphy, William J. Tables for Weights and Measurements: Crops. University of Missouri Extension. Available at https://extension2.missouri.edu/G4020. Accessed May 25, 2018.</li>
<li>U.S. Department of Agriculture, Office of Weights and Measures. Standard weight per bushel for agricultural commodities. Available at ftp://www.ilga.gov/JCAR/AdminCode/008/00800600ZZ9998bR.html Accessed May 25, 2018.</li>
</ol>
<p>Any feedstock amounts in mass units should be in dry short tons in the input data. Thus the amounts of any feedstocks traditionally measured in other units such as bushels must be converted before the data is supplied to FPEAM. While this conversion is not done internally, the following tables of average feedstock moisture contents and bushel sizes are provided to users to assist in the units conversion.</p>
<p>TABLE: Moisture content (mass fraction) at time of transport.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">feedstock</th>
<th style="text-align: center;">moisture content</th>
<th style="text-align: left;">source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">barley straw</td>
<td style="text-align: center;">0.069</td>
<td style="text-align: left;">Mani et al. (2004)</td>
</tr>
<tr class="even">
<td style="text-align: left;">biomass sorghum</td>
<td style="text-align: center;">0.650</td>
<td style="text-align: left;">Estimated from Rocateli et al. (2012)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">corn stover</td>
<td style="text-align: center;">0.15</td>
<td style="text-align: left;">McAloon et al. (2000)</td>
</tr>
<tr class="even">
<td style="text-align: left;">energy cane</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">Estimated from Miao et al. (2011)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">eucalyptus</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">Assumed equal to willow</td>
</tr>
<tr class="even">
<td style="text-align: left;">forest residues</td>
<td style="text-align: center;">0.5</td>
<td style="text-align: left;">Bouchard et al. (2012)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hay</td>
<td style="text-align: center;">0.069</td>
<td style="text-align: left;">Assumed equal to barley straw</td>
</tr>
<tr class="even">
<td style="text-align: left;">miscanthus</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">Estimated from Miao et al. (2011)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">oats straw</td>
<td style="text-align: center;">0.069</td>
<td style="text-align: left;">Assumed equal to barley straw</td>
</tr>
<tr class="even">
<td style="text-align: left;">pine</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">Assumed equal to willow</td>
</tr>
<tr class="odd">
<td style="text-align: left;">poplar</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">Assumed equal to willow</td>
</tr>
<tr class="even">
<td style="text-align: left;">sorghum stubble</td>
<td style="text-align: center;">0.650</td>
<td style="text-align: left;">Assumed equal to biomass sorghum</td>
</tr>
<tr class="odd">
<td style="text-align: left;">switchgrass</td>
<td style="text-align: center;">0.052</td>
<td style="text-align: left;">Mani et al. (2004)</td>
</tr>
<tr class="even">
<td style="text-align: left;">wheat straw</td>
<td style="text-align: center;">0.083</td>
<td style="text-align: left;">Mani et al. (2004)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">whole tree</td>
<td style="text-align: center;">0.5</td>
<td style="text-align: left;">Bouchard et al. (2012)</td>
</tr>
<tr class="even">
<td style="text-align: left;">willow</td>
<td style="text-align: center;">0.1</td>
<td style="text-align: left;">Estimated from Miao et al. (2011)</td>
</tr>
</tbody>
</table>
